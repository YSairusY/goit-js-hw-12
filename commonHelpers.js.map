{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport let perPage = 15;\nimport { page } from '../main';\n\nexport async function getPictures(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '45645042-c9b2fc3a6d24b970e9e620bb9',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  });\n  const url = `${BASE_URL}?${params}`;\n    const images = await axios\n        .get(url);\n  return images.data;\n}","export function renderElement({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n            />\n          </a>\n          <div class=\"thumb-block\">\n            <div class=\"block\">\n              <h2 class=\"tittle\">Likes</h2>\n              <p class=\"amount\">${likes}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"tittle\">Views</h2>\n              <p class=\"amount\">${views}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"tittle\">Comments</h2>\n              <p class=\"amount\">${comments}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"tittle\">Downloads</h2>\n              <p class=\"amount\">${downloads}</p>\n            </div>\n          </div>\n        </li>`;\n}\n\nexport function renderElements(arr) {\n  return arr.hits.map(renderElement).join('');\n}","import { getPictures } from './js/pixabay-api.js';\nimport { renderElements } from './js/render-functions.js';\nimport { perPage } from './js/pixabay-api.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst form = document.querySelector('.form');\nconst button = document.querySelector('#search');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\n\nexport let page = 1;\nlet inputValue = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    hideLoadBtn();\n  inputValue = event.currentTarget.elements.input.value.trim();\n  gallery.innerHTML = '';\n  if (!inputValue) {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'You forgot to fill in the form!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  page = 1;\n  gallery.innerHTML = '';\n  \n  showLoader();\n  try {\n      const images = await getPictures(inputValue, page);\n    hideLoader();\n    if (images === undefined || images.length === 0) {\n      iziToast.error({\n        title: 'Search result',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n      return;\n      }\n\n      totalHits = images.totalHits;\n     \n    const markup = renderElements(images);\n      gallery.innerHTML = markup;\n\n       const totalPages = Math.ceil(totalHits / perPage);\n         if (page < totalPages) {\n         showLoadBtn();\n        }\n        else {\n             hideLoadBtn();\n        }\n\n    initializeSlider();\n\n  } catch (error) {\n    hideLoader();\n    if (\n      error.name === 'TypeError' &&\n      error.message.includes('Failed to fetch')\n    ) {\n      iziToast.error({\n        title: 'Network Error',\n        message:\n          'Unable to connect. Please check your internet connection and try again.',\n        position: 'topRight',\n      });\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: `Error: ${error.message}`,\n        position: 'topRight',\n      });\n    }\n    }\n    \n    \n  \n  form.reset();\n}\n\nloadBtn.addEventListener('click', handleMore);\n\nasync function handleMore(event) {\n  page += 1;\n  showLoader();\n\n  try {\n    const newImages = await getPictures(inputValue, page);\n    const markup = renderElements(newImages);\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    initializeSlider();\n     myScroll();\n      hideLoader();\n      \n const totalPages = Math.ceil(totalHits / perPage);\n    if (page >= totalPages) {\n      iziToast.warning({\n        title: 'End of Results',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n        hideLoadBtn()\n        \n    }\n    \n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      color: 'red',\n      message: `‚ùå Error fetching more images: ${error.message}`,\n      position: 'top',\n    });\n  }\n}\n\nfunction showLoader() {\n  let existingLoader = document.querySelector('.loader');\n  if (!existingLoader) {\n    const loader = document.createElement('div');\n    loader.className = 'loader';\n    form.insertAdjacentElement('afterend', loader);\n  }\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nfunction hideLoadBtn() {\n  loadBtn.style.display = 'none';\n}\n\nfunction showLoadBtn() {\n  loadBtn.style.display = 'flex';\n}\n\nfunction myScroll() {\n  const card = document.querySelector('.gallery-item');\n  const cardParams = card.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardParams * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction initializeSlider() {\n  let gallerySlider = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  }).refresh();\n}"],"names":["perPage","getPictures","query","currentPage","BASE_URL","params","url","axios","renderElement","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderElements","arr","form","gallery","loadBtn","page","inputValue","totalHits","handleSubmit","event","hideLoadBtn","iziToast","showLoader","images","hideLoader","markup","totalPages","showLoadBtn","initializeSlider","error","handleMore","newImages","myScroll","loader","cardParams","SimpleLightbox"],"mappings":"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"}